var e=require("@urql/core"),u=require("vue"),t=require("wonka");function r(){return(r=Object.assign||function(e){for(var u=1;u<arguments.length;u++){var t=arguments[u];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function n(u,t){var r=t instanceof e.Client?t:new e.Client(t);u.provide("$urql",r)}function a(){return u.inject("$urql")}var o={flush:"pre"};function i(n,i,s){void 0===i&&(i=a()),void 0===s&&(s=[]);var c=u.reactive(n),f=u.ref(),l=u.ref(!1),v=u.ref(!1),p=u.ref(),h=u.ref(),d=u.ref(),x=u.isRef(n.pause)?n.pause:u.ref(!!n.pause),y=u.ref(e.createRequest(c.query,c.variables)),b=u.ref(null),q=u.ref(null);s.push(u.watchEffect((function(){var u=e.createRequest(c.query,c.variables);y.value.key!==u.key&&(y.value=u)}),o));var P={data:f,stale:l,error:p,operation:h,extensions:d,fetching:v,isPaused:x,executeQuery:function(e){return q.value(i.executeQuery(y.value,r({},{requestPolicy:c.requestPolicy},c.context,e))),w},pause:function(){x.value=!0},resume:function(){x.value=!1}},m=function(){return P};s.push(u.watchEffect((function(e){var u=t.makeSubject();b.value=function(e){var u;return t.concat([t.filter((function(e){return void 0!==e}))(t.map((function(){return u}))(t.fromValue(u))),t.share(t.onPush((function(e){u=e}))(e))])}(u.source),q.value=function(e){var r=!1;function n(){r||(r=!0,v.value=!0,l.value=!1)}var a=t.onEnd((function(){v.value=!1,l.value=!1}))(e?t.share(t.onPush((function(e){n(),f.value=e.data,l.value=!!e.stale,v.value=!1,p.value=e.error,h.value=e.operation,d.value=e.extensions}))(t.onStart(n)(e))):t.fromValue(void 0));u.next(a)},e(t.publish(t.map(m)(t.switchAll(b.value))).unsubscribe)}),{flush:"sync"})),s.push(u.watchEffect((function(){q.value(x.value?void 0:i.executeQuery(y.value,r({},{requestPolicy:c.requestPolicy},c.context)))}),o));var w=r({},P,{then:function(e,u){return(f.value?Promise.resolve(P):t.toPromise(t.take(1)(t.map(m)(t.switchAll(b.value))))).then(e,u)}});return w}function s(e,t){void 0===t&&(t=a());var r=u.ref(),n=u.ref(!1),o=u.ref(!1),i=u.ref(),s=u.ref(),c=u.ref();return{data:r,stale:n,fetching:o,error:i,operation:s,extensions:c,executeMutation:function(u,a){return o.value=!0,t.mutation(e,u,a).toPromise().then((function(e){return r.value=e.data,n.value=!!e.stale,o.value=!1,i.value=e.error,s.value=e.operation,c.value=e.extensions,e}))}}}var c={flush:"pre"};function f(n,o,i,s){void 0===i&&(i=a()),void 0===s&&(s=[]);var f=u.reactive(n),l=u.ref(),v=u.ref(!1),p=u.ref(!1),h=u.ref(),d=u.ref(),x=u.ref(),y=u.ref(o),b=u.isRef(n.pause)?n.pause:u.ref(!!n.pause),q=u.ref(e.createRequest(f.query,f.variables)),P=u.ref();s.push(u.watchEffect((function(){var u=e.createRequest(f.query,f.variables);q.value.key!==u.key&&(q.value=u)}),c)),s.push(u.watchEffect((function(){P.value=b.value?void 0:t.share(i.executeSubscription(q.value,r({},f.context)))}),c)),s.push(u.watchEffect((function(e){P.value&&e(t.publish(t.onPush((function(e){p.value=!0,l.value=void 0!==e.data&&"function"==typeof y.value?y.value(l.value,e.data):e.data,h.value=e.error,x.value=e.extensions,v.value=!!e.stale,d.value=e.operation}))(t.onEnd((function(){p.value=!1}))(t.onStart((function(){p.value=!0}))(P.value)))).unsubscribe)}),c));var m={data:l,stale:v,error:h,operation:d,extensions:x,fetching:p,isPaused:b,executeSubscription:function(e){return P.value=t.share(i.executeSubscription(q.value,r({},f.context,e))),m},pause:function(){b.value=!0},resume:function(){b.value=!1}};return m}exports.default=n,exports.install=n,exports.provideClient=function(t){var r=t instanceof e.Client?t:new e.Client(t);return u.provide("$urql",r),r},exports.useClientHandle=function(){var e=a(),t=[];return u.onBeforeUnmount((function(){for(var e;e=t.shift();)e()})),{client:e,useQuery:function(u){return i(u,e,t)},useSubscription:function(u,r){return f(u,r,e,t)},useMutation:function(u){return s(u,e)}}},exports.useMutation=function(e){return s(e)},exports.useQuery=function(e){return i(e)},exports.useSubscription=function(e,u){return f(e,u)},Object.keys(e).forEach((function(u){"default"===u||exports.hasOwnProperty(u)||(exports[u]=e[u])}));
//# sourceMappingURL=urql-vue.min.js.map
